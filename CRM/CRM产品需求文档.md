# CRM产品需求文档

## 一、产品概述

### 1. 产品背景
团队内BD与管理人员需要高效管理项目、跟进客户、归档聊天记录及任务协作。为此，CRM系统需实现以下功能：
- 项目与客户信息管理
- BD分配、认领项目及跟进状态更新（自动记录操作日志）
- 自动归档Telegram群聊天记录
- 任务管理（支持任务的创建、编辑和状态管理)
- 数据分析
- 账号与权限管理、个人中心（密码修改）

### 2. 产品愿景
构建一套内部CRM系统，实现项目管理、客户跟进、数据分析和任务协作的一体化解决方案，提高BD团队的工作效率和客户转化率。

### 3. 用户故事
- 作为BD，我希望能够查看分配给我的项目，以便及时跟进客户需求
- 作为BD，我希望能够登记新项目并将其绑定到我的名下，以便管理我主动开发的客户
- 作为BD，我希望系统能自动归档Telegram群聊天记录，以便随时查看与客户的沟通历史
- 作为管理员，我希望能够查看所有项目的分配状态和跟进情况，以便进行资源调配
- 作为管理员，我希望能够分析BD的转化率和项目状态，以便评估团队绩效
- 作为用户，我希望能够创建和管理任务，以便更好地安排工作计划

## 二、业务流程

### 1. 全局业务流程图
项目管理流程：
1. 项目来源（系统抓取/自然注册/BD登记）
2. 项目分配（未分配→已分配）
3. 项目绑定（预绑定→正式绑定）
4. 项目跟进（新分配→触达→跟进中→成单客户）
5. 项目状态监控（绑定失效规则自动执行）

### 2. 关键子流程图
**项目BD归属管理流程**：
- 系统抓取项目：系统按"循环轮回"机制自动分配给BD，设置为"预绑定"
- 客户自然注册项目：仅管理员可人工分配，设置为"预绑定"
- BD登记项目：直接分配给登记的BD，设置为"预绑定"

**预绑定升级为正式绑定条件**：
- 项目方成员的TG帐号、BD及公司机器人均在同一Telegram群内
- 系统根据TG群名称中包含的项目推特handle自动关联到该项目

**绑定失效规则**：
- 预绑定状态：BD自己预绑定一周内未建立正式绑定，或公司分配一个月内未建立正式绑定，则解除绑定
- 正式绑定状态：客户在TG群内最后回复超过2个月，或项目分配给BD超过3个月未成交，或公司机器人不在关联TG群中，则项目变为公海

## 三、功能设计

### 1. 功能地图
- 用户认证
  - 登录
  - 密码修改
- 项目管理
  - 项目列表查看
  - 项目详情查看
  - 项目筛选与搜索
  - 项目登记
  - 项目BD归属管理
- 客户跟进
  - 聊天记录归档
  - 跟进状态更新
  - 标签管理
- 任务管理
  - 任务创建
  - 任务编辑
  - 任务状态管理
- 数据分析
  - 项目数据分析
  - BD转化率分析
- 系统管理
  - 账号管理
  - 权限管理
  - 个人中心

### 2. 功能描述模板
| 功能ID | 功能名称 | 功能描述 | 优先级 | 备注 |
| ------ | -------- | -------- | ------ | ---- |
| F001 | 项目列表查看 | 展示项目基础信息、支持筛选和搜索 | 高 | 管理员可查看所有项目，BD只能查看分配给自己或未分配的项目 |
| F002 | 项目详情查看 | 以卡片式布局展示项目详细信息 | 高 | 包括项目档案、变更记录、聊天记录等Tab |
| F003 | 项目登记 | BD可登记新项目并绑定到自己名下 | 高 | 通过输入推特handle进行登记 |
| F004 | 项目BD归属管理 | 管理项目的BD绑定关系 | 高 | 包括预绑定、正式绑定及绑定失效规则 |
| F005 | 聊天记录归档 | 自动归档Telegram群聊天记录 | 高 | 根据群名称匹配项目 |
| F006 | 任务管理 | 创建、编辑和管理任务 | 低 | 支持关联项目 |
| F007 | 数据分析 | 分析项目状态和BD转化率 | 中 | 包括项目分配比例、转化率等 |
| F008 | 账号管理 | 管理用户账号和权限 | 高 | 仅管理员可访问 |

## 四、业务规则

### 1. 业务规则概述
CRM系统的业务规则主要围绕项目BD归属管理、绑定状态管理和数据权限控制三个方面展开，确保项目分配的公平性、客户跟进的及时性以及系统数据的安全性。

### 2. 业务规则列表模板

#### 示例业务规则表格：
| 规则ID | 规则名称 | 规则描述 | 触发条件 | 执行动作 | 优先级 | 备注 |
| ------ | -------- | -------- | -------- | -------- | ------ | ---- |
| R001 | 项目自动分配规则 | 系统抓取的新项目按"循环轮回"机制自动分配给BD | 系统抓取新项目 | 按顺序分配给BD，设置为预绑定 | 高 | 确保项目分配的公平性 |
| R002 | 预绑定升级规则 | 满足条件时预绑定自动升级为正式绑定 | 项目方TG账号、BD及机器人在同一群内，且群名包含项目推特handle | 绑定关系升级为正式绑定 | 高 | 确认BD已与客户建立有效沟通 |
| R003 | 预绑定失效规则 | BD自己预绑定一周内或公司分配一个月内未建立正式绑定则解除绑定 | 时间达到阈值且未升级为正式绑定 | 解除绑定，项目状态变为未分配 | 中 | 确保BD及时跟进客户 |
| R004 | 正式绑定失效规则 | 满足任一条件时解除正式绑定 | 客户TG群最后回复超2个月，或分配超3个月未成交，或机器人不在群中 | 解除绑定，项目变为公海 | 中 | 确保客户持续跟进 |
| R005 | 数据权限控制规则 | 管理员可查看所有数据，BD只能查看自己的数据 | 用户登录系统 | 根据用户角色显示相应数据 | 高 | 确保数据安全性 |

## 五、数据需求

### 数据流说明
CRM系统的数据主要来源于三个渠道：
1. 系统自动抓取的项目数据
2. 客户自然注册的项目数据
3. BD手动登记的项目数据

系统需要处理以下数据流：
- 项目基础信息流：项目名称、推特handle、联系方式等基础信息
- 项目归属流：项目与BD的绑定关系、绑定状态变更
- 客户沟通流：Telegram群聊天记录的自动归档
- 任务管理流：任务创建、状态变更、完成情况
- 数据分析流：项目状态统计、BD转化率分析

#### 数据实体关系
主要数据实体包括：
- 用户（管理员/BD）
- 项目
- 任务
- 聊天记录
- 操作日志

关键关系：
- 一个项目可以归属一个BD（多对一）
- 一个BD可以管理多个项目（一对多）
- 一个项目可以关联多个任务（一对多）
- 一个项目可以关联一个Telegram群（一对一）

#### 数据字典
| 字段名称 | 数据类型 | 字段描述 | 是否必填 | 备注 |
| -------- | -------- | -------- | -------- | ---- |
| 项目名称 | 文本 | 项目的名称 | 是 | 唯一标识项目 |
| X handler | 文本 | 项目的推特handle | 是 | 用于项目识别和群聊关联 |
| 项目来源 | 选项 | 项目数据的来源 | 是 | 系统抓取/自然注册/BD登记 |
| 分配状态 | 选项 | 项目的分配状态 | 是 | 未分配/已分配/公海客户/已成交 |
| 绑定状态 | 选项 | 项目与BD的绑定状态 | 是 | 预绑定/正式绑定 |
| 归属BD | 文本 | 项目归属的BD账号 | 否 | 未分配时为空 |
| 跟进状态 | 选项 | 项目的跟进阶段 | 是 | 新分配/触达/跟进中/成单客户 |
| 客户重要程度 | 选项 | 客户的重要程度 | 否 | 高/中/低 |
| 最后跟进时间 | 日期 | 最后一次跟进的时间 | 否 | 用于判断绑定是否失效 |
| 成交时间 | 日期 | 项目成交的时间 | 否 | 仅成交项目有值 | 